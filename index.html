<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Followw - The Flow Operating System</title>
    <meta name="description" content="Work that moves with you. A complete Flow Operating System for modern professionals.">
    <!-- Confetti library for celebrations -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* ===== FOLLOWW COMPLETE DESIGN SYSTEM ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-bg: #000000;
            --color-card: #0A0A0A;
            --color-text: #FFFFFF;
            --color-text-secondary: #888888;
            --color-accent: #FFFFFF;
            --color-success: #FFFFFF;
            --color-warning: #CCCCCC;
            --color-error: #FFFFFF;

            --gray-50: #0A0A0A;
            --gray-100: #1A1A1A;
            --gray-200: #2A2A2A;
            --gray-300: #3A3A3A;
            --gray-400: #666666;
            --gray-500: #888888;

            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;

            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;

            --transition-fast: 180ms cubic-bezier(0.32, 0.08, 0.24, 1.0);
            --transition-normal: 220ms cubic-bezier(0.32, 0.08, 0.24, 1.0);
            --transition-slow: 400ms cubic-bezier(0.32, 0.08, 0.24, 1.0);

            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #000000;
                --color-card: #0A0A0A;
                --color-text: #FFFFFF;
                --color-text-secondary: #888888;
                --gray-100: #1A1A1A;
                --gray-200: #2A2A2A;
                --gray-300: #3A3A3A;
                --gray-400: #666666;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'SF Pro Text', sans-serif;
            background: #000000;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: var(--color-text);
            overflow: hidden;
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: welcomeFade 0.6s ease;
        }

        .welcome-screen.hidden {
            animation: welcomeFadeOut 0.6s ease forwards;
            pointer-events: none;
        }

        @keyframes welcomeFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes welcomeFadeOut {
            to { opacity: 0; }
        }

        .welcome-logo {
            width: 120px;
            height: 120px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            margin-bottom: var(--space-xl);
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .welcome-title {
            font-size: 48px;
            font-weight: 700;
            color: white;
            margin-bottom: var(--space-sm);
            text-align: center;
            letter-spacing: -0.02em;
        }

        .welcome-tagline {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: var(--space-2xl);
            text-align: center;
        }

        .welcome-button {
            padding: 16px 48px;
            border: 2px solid white;
            background: transparent;
            color: white;
            font-size: 18px;
            font-weight: 600;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-normal);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }

        .welcome-button:hover {
            background: white;
            color: black;
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(255, 255, 255, 0.2);
        }

        /* Main App */
        .app-container {
            width: 100%;
            max-width: 1200px;
            height: 90vh;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            box-shadow: 0 20px 40px rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            animation: appSlideIn 0.5s cubic-bezier(0.32, 0.08, 0.24, 1.0);
            opacity: 0;
        }

        .app-container.visible {
            opacity: 1;
        }

        @media (prefers-color-scheme: dark) {
            .app-container {
                background: rgba(10, 10, 10, 0.95);
            }
        }

        @keyframes appSlideIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(30px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-lg);
            border-bottom: 1px solid var(--gray-200);
            flex-shrink: 0;
            flex-wrap: wrap;
            gap: var(--space-md);
        }

        .greeting {
            flex: 1;
            min-width: 200px;
        }

        .greeting h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
            letter-spacing: -0.02em;
        }

        .greeting p {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .view-tabs {
            display: flex;
            gap: var(--space-sm);
            flex: 0 0 auto;
        }

        .tab {
            padding: 8px 20px;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            font-size: 14px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tab:hover {
            background: var(--gray-200);
        }

        .tab.active {
            background: white;
            color: black;
        }

        .header-actions {
            display: flex;
            gap: var(--space-sm);
            align-items: center;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            font-size: 18px;
        }

        .icon-btn:hover {
            background: var(--gray-200);
            color: var(--color-text);
        }

        .shortcut-hint {
            font-size: 11px;
            color: var(--color-text-secondary);
            padding: 4px 12px;
            background: var(--gray-200);
            border-radius: 12px;
            font-family: monospace;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
        }

        .main-content::-webkit-scrollbar {
            width: 8px;
        }

        .main-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .main-content::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: 4px;
        }

        /* Views */
        .view {
            display: none;
            animation: viewFadeIn var(--transition-normal);
        }

        .view.active {
            display: block;
        }

        @keyframes viewFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card */
        .card {
            background: var(--color-card);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .stat-card {
            padding: var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-content h3 {
            font-size: 32px;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 4px;
        }

        .stat-content p {
            font-size: 13px;
            color: var(--color-text-secondary);
            text-transform: lowercase;
        }

        .stat-trend {
            font-size: 12px;
            color: var(--color-success);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Quick Add */
        .quick-add {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .quick-add-icon {
            width: 24px;
            height: 24px;
            color: var(--color-accent);
            font-size: 20px;
        }

        .quick-add input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 17px;
            outline: none;
            color: var(--color-text);
            font-family: inherit;
        }

        .quick-add input::placeholder {
            color: var(--color-text-secondary);
        }

        /* Sections */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .section-title {
            font-size: 13px;
            color: var(--color-text-secondary);
            text-transform: lowercase;
            font-weight: 500;
        }

        .section-count {
            font-size: 12px;
            color: var(--color-text-secondary);
            background: var(--gray-200);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .tasks-section {
            margin-bottom: var(--space-xl);
        }

        /* Task */
        .task {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .task:hover {
            transform: translateX(4px);
        }

        .task.completed .task-title {
            text-decoration: line-through;
            opacity: 0.5;
        }

        .task.focus {
            border-left: 3px solid var(--color-accent);
            padding-left: calc(var(--space-md) - 3px);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--gray-400);
            border-radius: 50%;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .checkbox:hover {
            border-color: var(--color-accent);
            transform: scale(1.1);
        }

        .task.completed .checkbox {
            background: var(--color-success);
            border-color: var(--color-success);
            animation: checkPop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes checkPop {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .task.completed .checkbox::after {
            content: '✓';
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        .task-content {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-size: 16px;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .task-meta {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 12px;
            color: var(--color-text-secondary);
            flex-wrap: wrap;
        }

        .task-tag {
            padding: 2px 8px;
            background: var(--gray-200);
            border-radius: 10px;
            font-size: 11px;
        }

        .task-client {
            color: var(--color-accent);
            font-weight: 500;
        }

        .task-actions {
            display: flex;
            gap: var(--space-xs);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .task:hover .task-actions {
            opacity: 1;
        }

        .task-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            font-size: 16px;
            color: var(--color-text-secondary);
        }

        .task-btn:hover {
            background: var(--gray-200);
            color: var(--color-text);
        }

        .task-btn.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Floating Timer */
        .floating-timer {
            display: none;
            flex-direction: row;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            margin-top: var(--space-lg);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .floating-timer.active {
            display: flex;
            animation: timerSlide 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes timerSlide {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .timer-pulse {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            position: relative;
            animation: pulse 1.5s ease-in-out infinite;
            flex-shrink: 0;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }
            50% {
                box-shadow: 0 0 0 20px rgba(255, 255, 255, 0);
            }
        }

        .timer-info {
            flex: 1;
            min-width: 0;
        }

        .timer-task {
            font-weight: 600;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .timer-label {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .timer-display {
            font-size: 28px;
            font-weight: 700;
            color: white;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
        }

        .timer-stop {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            border-radius: 50%;
            cursor: pointer;
            color: var(--color-error);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .timer-stop:hover {
            background: rgba(239, 71, 111, 0.1);
            transform: scale(1.1);
        }

        /* Command Palette */
        .command-palette {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            z-index: 9000;
            align-items: flex-start;
            justify-content: center;
            padding-top: 15vh;
            animation: modalFade 0.2s ease;
        }

        .command-palette.active {
            display: flex;
        }

        @keyframes modalFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .command-content {
            width: 600px;
            max-width: 90%;
            background: var(--color-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            animation: commandSlide 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes commandSlide {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .command-input-wrapper {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            border-bottom: 1px solid var(--gray-200);
        }

        .command-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 18px;
            outline: none;
            color: var(--color-text);
            font-family: inherit;
        }

        .command-results {
            max-height: 400px;
            overflow-y: auto;
        }

        .command-item {
            padding: var(--space-md);
            cursor: pointer;
            transition: background var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .command-item:hover,
        .command-item.selected {
            background: var(--gray-100);
        }

        .command-icon {
            width: 36px;
            height: 36px;
            background: var(--gray-200);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .command-item-content h4 {
            font-size: 15px;
            margin-bottom: 2px;
        }

        .command-item-content p {
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--space-2xl);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: var(--space-md);
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: var(--space-sm);
            font-weight: 600;
        }

        .empty-state p {
            color: var(--color-text-secondary);
            font-size: 15px;
            line-height: 1.6;
        }

        /* Reflection Overlay */
        .reflection {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .reflection.active {
            display: flex;
            animation: reflectionFade 0.8s ease;
        }

        @keyframes reflectionFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .reflection-content {
            text-align: center;
            color: white;
            padding: var(--space-2xl);
            max-width: 700px;
        }

        .reflection-wave {
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, transparent, white, transparent);
            margin-bottom: var(--space-2xl);
            border-radius: 2px;
            animation: wave 4s ease-in-out;
        }

        @keyframes wave {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }

        .reflection h2 {
            font-size: 40px;
            margin-bottom: var(--space-xl);
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .reflection-stats {
            display: flex;
            gap: var(--space-2xl);
            justify-content: center;
            margin-bottom: var(--space-xl);
            flex-wrap: wrap;
        }

        .reflection-stat h3 {
            font-size: 36px;
            color: white;
            margin-bottom: var(--space-sm);
            font-weight: 700;
        }

        .reflection-stat p {
            font-size: 14px;
            opacity: 0.8;
            text-transform: lowercase;
        }

        .reflection-insight {
            font-size: 20px;
            opacity: 0.9;
            line-height: 1.6;
            margin-bottom: var(--space-xl);
        }

        .reflection-close {
            padding: 12px 32px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: transparent;
            color: white;
            font-size: 16px;
            font-weight: 500;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .reflection-close:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Analytics */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .analytics-card {
            padding: var(--space-lg);
        }

        .analytics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .analytics-title {
            font-size: 14px;
            color: var(--color-text-secondary);
            text-transform: lowercase;
            font-weight: 500;
        }

        .chart-bar {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
        }

        .chart-label {
            font-size: 13px;
            width: 70px;
            color: var(--color-text-secondary);
        }

        .chart-track {
            flex: 1;
            height: 28px;
            background: var(--gray-200);
            border-radius: 14px;
            overflow: hidden;
            position: relative;
        }

        .chart-fill {
            height: 100%;
            background: white;
            border-radius: 14px;
            transition: width 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: black;
            font-size: 12px;
            font-weight: 600;
        }

        .chart-value {
            font-size: 14px;
            font-weight: 600;
            width: 50px;
            text-align: right;
        }

        .insight-item {
            padding: var(--space-md);
            background: var(--gray-100);
            border-radius: var(--radius-sm);
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
        }

        .insight-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .insight-text {
            font-size: 14px;
            line-height: 1.6;
            color: var(--color-text-secondary);
        }

        /* Clients View */
        .clients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: var(--space-md);
        }

        .client-card {
            padding: var(--space-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .client-card:hover {
            transform: translateY(-4px);
        }

        .client-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .client-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            color: white;
        }

        .client-info h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .client-info p {
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .client-stats {
            display: flex;
            gap: var(--space-lg);
            padding-top: var(--space-md);
            border-top: 1px solid var(--gray-200);
        }

        .client-stat {
            text-align: center;
        }

        .client-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .client-stat-label {
            font-size: 11px;
            color: var(--color-text-secondary);
            text-transform: lowercase;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            font-family: inherit;
        }

        .btn-primary {
            background: white;
            color: black;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
        }

        .btn-secondary {
            background: var(--gray-200);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: var(--gray-300);
        }

        /* Focus Mode */
        .focus-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 8000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: focusFade 0.6s ease;
        }

        .focus-mode.active {
            display: flex;
        }

        @keyframes focusFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .focus-content {
            max-width: 600px;
            padding: var(--space-2xl);
            text-align: center;
            color: white;
        }

        .focus-task-title {
            font-size: 32px;
            margin-bottom: var(--space-xl);
            font-weight: 600;
        }

        .focus-timer {
            font-size: 64px;
            font-weight: 700;
            color: white;
            margin-bottom: var(--space-xl);
            font-variant-numeric: tabular-nums;
        }

        .breathing-circle {
            width: 100px;
            height: 100px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            margin: 0 auto var(--space-xl);
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .view-tabs {
                flex-wrap: wrap;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }

            .analytics-grid,
            .clients-grid {
                grid-template-columns: 1fr;
            }

            .reflection-stats {
                flex-direction: column;
                gap: var(--space-lg);
            }

            .command-content {
                width: 95%;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-logo">⚡</div>
        <h1 class="welcome-title">Followw</h1>
        <p class="welcome-tagline">work that moves with you.</p>
        <button class="welcome-button" onclick="startApp()">Get Started</button>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <div class="header">
            <div class="greeting">
                <h1 id="greeting">good morning.</h1>
                <p>let's get back in flow.</p>
            </div>

            <div class="view-tabs">
                <button class="tab active" data-view="today">
                    <span>☀️</span>
                    <span>today</span>
                </button>
                <button class="tab" data-view="tasks">
                    <span>✓</span>
                    <span>tasks</span>
                </button>
                <button class="tab" data-view="clients">
                    <span>👥</span>
                    <span>clients</span>
                </button>
                <button class="tab" data-view="analytics">
                    <span>📊</span>
                    <span>analytics</span>
                </button>
            </div>

            <div class="header-actions">
                <span class="shortcut-hint">⌘K</span>
                <button class="icon-btn" onclick="toggleCommandPalette()" title="Command Palette">
                    <span>⌘</span>
                </button>
                <button class="icon-btn" onclick="toggleFocusMode()" title="Focus Mode">
                    <span>🎯</span>
                </button>
                <button class="icon-btn" onclick="exportData()" title="Export Data">
                    <span>⤓</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Today View -->
            <div id="today-view" class="view active">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card card">
                        <div class="stat-header">
                            <div class="stat-icon">⏱️</div>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-time">0h 0m</h3>
                            <p>focus time</p>
                            <div class="stat-trend">↑ 12% from yesterday</div>
                        </div>
                    </div>

                    <div class="stat-card card">
                        <div class="stat-header">
                            <div class="stat-icon">✓</div>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-completed">0</h3>
                            <p>completed</p>
                            <div class="stat-trend">🎯 focus tasks: <span id="focus-count">0</span></div>
                        </div>
                    </div>

                    <div class="stat-card card">
                        <div class="stat-header">
                            <div class="stat-icon">🔥</div>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-streak">0</h3>
                            <p>day streak</p>
                            <div class="stat-trend">Keep it going!</div>
                        </div>
                    </div>

                    <div class="stat-card card">
                        <div class="stat-header">
                            <div class="stat-icon">⚡</div>
                        </div>
                        <div class="stat-content">
                            <h3 id="flow-score">—</h3>
                            <p>flow score</p>
                            <div class="stat-trend" id="flow-rating">Start tracking</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Add -->
                <div class="quick-add card">
                    <div class="quick-add-icon">➕</div>
                    <input type="text" id="quick-add" placeholder="add task... (try 'Design pitch for tomorrow' or 'Review PR #urgent')" />
                </div>

                <!-- Focus Tasks -->
                <div id="focus-section" class="tasks-section">
                    <div class="section-header">
                        <span class="section-title">🎯 focus</span>
                        <span class="section-count" id="focus-task-count">0</span>
                    </div>
                    <div id="focus-tasks"></div>
                </div>

                <!-- Supporting Tasks -->
                <div id="supporting-section" class="tasks-section">
                    <div class="section-header">
                        <span class="section-title">📋 supporting</span>
                        <span class="section-count" id="supporting-task-count">0</span>
                    </div>
                    <div id="supporting-tasks"></div>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="empty-state">
                    <div class="empty-icon">✨</div>
                    <h3>you're all caught up</h3>
                    <p>Start by adding your first task above.<br>
                    Try: "Design landing page" or "Review pull requests"</p>
                </div>

                <!-- Floating Timer -->
                <div id="floating-timer" class="floating-timer card">
                    <div class="timer-pulse"></div>
                    <div class="timer-info">
                        <div class="timer-task" id="timer-task-name">Task name</div>
                        <div class="timer-label">tracking time</div>
                    </div>
                    <div class="timer-display" id="timer-display">0:00</div>
                    <button class="timer-stop" onclick="stopTimer()">■</button>
                </div>
            </div>

            <!-- All Tasks View -->
            <div id="tasks-view" class="view">
                <div class="section-header">
                    <h2 class="section-title" style="font-size: 20px;">all tasks</h2>
                    <button class="btn btn-secondary" onclick="filterTasks('all')">
                        <span id="task-filter-label">All Tasks</span>
                    </button>
                </div>
                <div id="all-tasks-list"></div>
                <div id="all-tasks-empty" class="empty-state hidden">
                    <div class="empty-icon">📝</div>
                    <h3>no tasks yet</h3>
                    <p>Create your first task to get started</p>
                </div>
            </div>

            <!-- Clients View -->
            <div id="clients-view" class="view">
                <div class="section-header">
                    <h2 class="section-title" style="font-size: 20px;">clients</h2>
                    <button class="btn btn-primary" onclick="addSampleClient()">
                        <span>+ Add Client</span>
                    </button>
                </div>
                <div class="clients-grid" id="clients-grid"></div>
                <div id="clients-empty" class="empty-state">
                    <div class="empty-icon">👥</div>
                    <h3>no clients yet</h3>
                    <p>Add clients to organize your work by customer or project owner</p>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analytics-view" class="view">
                <div class="analytics-grid">
                    <div class="analytics-card card">
                        <div class="analytics-header">
                            <h3 class="analytics-title">📈 this week</h3>
                        </div>
                        <div id="weekly-chart"></div>
                    </div>

                    <div class="analytics-card card">
                        <div class="analytics-header">
                            <h3 class="analytics-title">💡 insights</h3>
                        </div>
                        <div id="insights-list"></div>
                    </div>

                    <div class="analytics-card card">
                        <div class="analytics-header">
                            <h3 class="analytics-title">⚡ flow patterns</h3>
                        </div>
                        <div id="flow-patterns"></div>
                    </div>

                    <div class="analytics-card card">
                        <div class="analytics-header">
                            <h3 class="analytics-title">🎯 by client</h3>
                        </div>
                        <div id="client-breakdown"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Command Palette -->
    <div class="command-palette" id="commandPalette">
        <div class="command-content">
            <div class="command-input-wrapper">
                <span style="font-size: 20px;">⌘</span>
                <input type="text" class="command-input" id="commandInput" placeholder="Type a command..." />
            </div>
            <div class="command-results" id="commandResults"></div>
        </div>
    </div>

    <!-- Focus Mode -->
    <div class="focus-mode" id="focusMode">
        <div class="focus-content">
            <div class="breathing-circle"></div>
            <h2 class="focus-task-title" id="focusTaskTitle">Design Landing Page</h2>
            <div class="focus-timer" id="focusTimer">0:00</div>
            <button class="btn btn-primary" onclick="toggleFocusMode()">Exit Focus Mode</button>
        </div>
    </div>

    <!-- Reflection Overlay -->
    <div class="reflection" id="reflection">
        <div class="reflection-content">
            <div class="reflection-wave"></div>
            <h2>you've done enough for today.</h2>
            <div class="reflection-stats">
                <div class="reflection-stat">
                    <h3 id="reflection-time">0h 0m</h3>
                    <p>focus time</p>
                </div>
                <div class="reflection-stat">
                    <h3 id="reflection-tasks">0</h3>
                    <p>tasks completed</p>
                </div>
                <div class="reflection-stat">
                    <h3 id="reflection-flow">—</h3>
                    <p>flow score</p>
                </div>
            </div>
            <p class="reflection-insight" id="reflection-insight">
                Great work today. You maintained excellent focus and completed all your priorities.
            </p>
            <button class="reflection-close" onclick="closeReflection()">Continue</button>
        </div>
    </div>

    <script>
        // ===== FOLLOWW - COMPLETE APPLICATION =====

        const APP_VERSION = '1.0.0';
        const STORAGE_KEY = 'followw_data_v1';

        // State Management
        const state = {
            tasks: [],
            clients: [],
            activeTimer: null,
            timerInterval: null,
            currentView: 'today',
            focusMode: false,
            stats: {
                totalMinutes: 0,
                completed: 0,
                sessions: 0,
                streak: 0,
                flowScore: 0
            },
            settings: {
                theme: 'system',
                sounds: true,
                notifications: true
            }
        };

        // Sample data
        const SAMPLE_CLIENTS = [
            { name: 'Acme Corp', color: '#3A76F0', tasks: 12, time: 240 },
            { name: 'TechStart', color: '#10B981', tasks: 8, time: 180 },
            { name: 'Design Studio', color: '#F59E0B', tasks: 15, time: 320 }
        ];

        const SAMPLE_TASKS = [
            'Design landing page for new product',
            'Review pull requests and merge',
            'Write documentation for API',
            'Plan Q2 roadmap meeting',
            'Update client presentation deck'
        ];

        const INSIGHTS = [
            "You're most productive between 9-11 AM. Schedule deep work then.",
            "Your focus sessions average 45 minutes. Try the Pomodoro technique.",
            "You completed all focus tasks this week. Excellent prioritization!",
            "Take more breaks to maintain energy throughout the day.",
            "Your flow score improved 23% this week. Keep it up!"
        ];

        // ===== INITIALIZATION =====

        function startApp() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const appContainer = document.getElementById('appContainer');

            welcomeScreen.classList.add('hidden');
            setTimeout(() => {
                appContainer.classList.add('visible');
                loadState();
                init();
            }, 600);
        }

        function init() {
            updateGreeting();
            renderAll();
            setupEventListeners();
            updateAnalytics();
            setInterval(updateGreeting, 60000);

            // Add sample tasks if empty
            if (state.tasks.length === 0) {
                SAMPLE_TASKS.slice(0, 3).forEach((title, i) => {
                    addTask(title, i < 2);
                });
            }
        }

        // ===== STATE MANAGEMENT =====

        function loadState() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const data = JSON.parse(saved);
                    state.tasks = data.tasks || [];
                    state.clients = data.clients || SAMPLE_CLIENTS;
                    state.stats = data.stats || state.stats;
                } else {
                    state.clients = SAMPLE_CLIENTS;
                }
            } catch (e) {
                console.error('Failed to load state:', e);
            }
        }

        function saveState() {
            try {
                const data = {
                    tasks: state.tasks,
                    clients: state.clients,
                    stats: state.stats,
                    timestamp: Date.now()
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            } catch (e) {
                console.error('Failed to save state:', e);
            }
        }

        // ===== TASK OPERATIONS =====

        function addTask(title, isFocus = false, client = null) {
            const task = {
                id: Date.now() + Math.random(),
                title,
                isFocus,
                completed: false,
                client,
                tags: extractTags(title),
                notes: '',
                createdAt: Date.now(),
                timeSpent: 0,
                project: null
            };

            state.tasks.push(task);
            saveState();
            renderAll();

            // Confetti for first task
            if (state.tasks.length === 1 && typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 50,
                    spread: 60,
                    origin: { y: 0.8 }
                });
            }
        }

        function extractTags(title) {
            const tags = [];
            const tagMatch = title.match(/#\w+/g);
            if (tagMatch) {
                tags.push(...tagMatch.map(t => t.slice(1)));
            }
            return tags;
        }

        function toggleComplete(id) {
            const task = state.tasks.find(t => t.id === id);
            if (!task) return;

            task.completed = !task.completed;

            if (task.completed) {
                state.stats.completed++;

                // Confetti celebration
                if (typeof confetti !== 'undefined') {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                }

                if (shouldShowReflection()) {
                    setTimeout(showReflection, 800);
                }
            } else {
                state.stats.completed = Math.max(0, state.stats.completed - 1);
            }

            saveState();
            renderAll();
            updateFlowScore();
        }

        function deleteTask(id) {
            state.tasks = state.tasks.filter(t => t.id !== id);
            saveState();
            renderAll();
        }

        // ===== TIMER OPERATIONS =====

        function startTimer(taskId) {
            const task = state.tasks.find(t => t.id === taskId);
            if (!task) return;

            if (state.activeTimer) {
                stopTimer();
            }

            state.activeTimer = {
                taskId,
                startTime: Date.now()
            };

            state.stats.sessions++;

            state.timerInterval = setInterval(() => {
                updateTimerDisplay();
            }, 1000);

            renderAll();
            updateFloatingTimer();
        }

        function stopTimer() {
            if (!state.activeTimer) return;

            const elapsed = Date.now() - state.activeTimer.startTime;
            const task = state.tasks.find(t => t.id === state.activeTimer.taskId);

            if (task) {
                task.timeSpent += elapsed;
            }

            const minutes = Math.floor(elapsed / 60000);
            state.stats.totalMinutes += minutes;

            clearInterval(state.timerInterval);
            state.activeTimer = null;
            state.timerInterval = null;

            saveState();
            renderAll();
            updateFloatingTimer();
            updateFlowScore();
        }

        function updateTimerDisplay() {
            if (!state.activeTimer) return;

            const elapsed = Date.now() - state.activeTimer.startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);

            const display = document.getElementById('timer-display');
            const focusDisplay = document.getElementById('focusTimer');

            const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            if (display) display.textContent = timeStr;
            if (focusDisplay) focusDisplay.textContent = timeStr;
        }

        function updateFloatingTimer() {
            const timer = document.getElementById('floating-timer');

            if (state.activeTimer) {
                const task = state.tasks.find(t => t.id === state.activeTimer.taskId);
                if (task) {
                    document.getElementById('timer-task-name').textContent = task.title;
                    timer.classList.add('active');
                }
            } else {
                timer.classList.remove('active');
            }
        }

        // ===== RENDERING =====

        function renderAll() {
            renderTasks();
            updateStats();
            renderClients();
            updateAnalytics();
        }

        function renderTasks() {
            const focusTasks = state.tasks.filter(t => !t.completed && t.isFocus);
            const supportingTasks = state.tasks.filter(t => !t.completed && !t.isFocus);
            const allTasks = state.tasks;

            // Today view
            renderTaskList(focusTasks, 'focus-tasks');
            renderTaskList(supportingTasks, 'supporting-tasks');

            document.getElementById('focus-task-count').textContent = focusTasks.length;
            document.getElementById('supporting-task-count').textContent = supportingTasks.length;

            const hasToday = focusTasks.length > 0 || supportingTasks.length > 0;
            document.getElementById('empty-state').classList.toggle('hidden', hasToday);
            document.getElementById('focus-section').classList.toggle('hidden', focusTasks.length === 0);
            document.getElementById('supporting-section').classList.toggle('hidden', supportingTasks.length === 0);

            // All tasks view
            renderTaskList(allTasks, 'all-tasks-list');
            document.getElementById('all-tasks-empty').classList.toggle('hidden', allTasks.length > 0);
        }

        function renderTaskList(tasks, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = '';

            tasks.forEach(task => {
                const div = document.createElement('div');
                div.className = 'task card' + (task.completed ? ' completed' : '') + (task.isFocus ? ' focus' : '');

                const isTimerActive = state.activeTimer?.taskId === task.id;

                div.innerHTML = `
                    <div class="checkbox" onclick="toggleComplete(${task.id})"></div>
                    <div class="task-content" onclick="openTaskDetail(${task.id})">
                        <div class="task-title">${escapeHtml(task.title)}</div>
                        <div class="task-meta">
                            ${task.client ? `<span class="task-client">@${task.client}</span>` : ''}
                            ${task.tags.map(tag => `<span class="task-tag">#${tag}</span>`).join('')}
                            ${task.timeSpent > 0 ? `<span class="task-time">⏱️ ${formatTime(task.timeSpent)}</span>` : ''}
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="task-btn ${isTimerActive ? 'active' : ''}" onclick="toggleTimer(event, ${task.id})" title="${isTimerActive ? 'Stop timer' : 'Start timer'}">
                            ${isTimerActive ? '■' : '▶'}
                        </button>
                        <button class="task-btn" onclick="deleteTask(${task.id})" title="Delete task">
                            🗑️
                        </button>
                    </div>
                `;

                container.appendChild(div);
            });
        }

        function renderClients() {
            const container = document.getElementById('clients-grid');
            const empty = document.getElementById('clients-empty');

            if (state.clients.length === 0) {
                empty.classList.remove('hidden');
                container.classList.add('hidden');
                return;
            }

            empty.classList.add('hidden');
            container.classList.remove('hidden');
            container.innerHTML = '';

            state.clients.forEach(client => {
                const div = document.createElement('div');
                div.className = 'client-card card';

                div.innerHTML = `
                    <div class="client-header">
                        <div class="client-avatar" style="background: ${client.color}">
                            ${client.name[0]}
                        </div>
                        <div class="client-info">
                            <h3>${client.name}</h3>
                            <p>${client.tasks} tasks</p>
                        </div>
                    </div>
                    <div class="client-stats">
                        <div class="client-stat">
                            <div class="client-stat-value">${formatMinutes(client.time)}</div>
                            <div class="client-stat-label">time</div>
                        </div>
                        <div class="client-stat">
                            <div class="client-stat-value">${client.tasks}</div>
                            <div class="client-stat-label">tasks</div>
                        </div>
                    </div>
                `;

                container.appendChild(div);
            });
        }

        function updateStats() {
            const hours = Math.floor(state.stats.totalMinutes / 60);
            const minutes = state.stats.totalMinutes % 60;
            const timeText = hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;

            document.getElementById('stat-time').textContent = timeText;
            document.getElementById('stat-completed').textContent = state.stats.completed;
            document.getElementById('focus-count').textContent = state.tasks.filter(t => !t.completed && t.isFocus).length;
            document.getElementById('stat-streak').textContent = state.stats.streak || Math.floor(state.stats.completed / 5);

            const flowScore = calculateFlowScore();
            document.getElementById('flow-score').textContent = flowScore > 0 ? flowScore : '—';
            document.getElementById('flow-rating').textContent = getFlowRating(flowScore);
        }

        function updateAnalytics() {
            // Weekly chart
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const weeklyChart = document.getElementById('weekly-chart');
            if (!weeklyChart) return;

            weeklyChart.innerHTML = '';

            days.forEach((day, i) => {
                const value = i === new Date().getDay() ? state.stats.totalMinutes : Math.floor(Math.random() * 180);
                const maxValue = 240;
                const percentage = Math.min((value / maxValue) * 100, 100);

                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.innerHTML = `
                    <div class="chart-label">${day}</div>
                    <div class="chart-track">
                        <div class="chart-fill" style="width: ${percentage}%">
                            ${value > 20 ? value + 'm' : ''}
                        </div>
                    </div>
                    <div class="chart-value">${value}m</div>
                `;
                weeklyChart.appendChild(bar);
            });

            // Insights
            const insightsList = document.getElementById('insights-list');
            if (insightsList) {
                insightsList.innerHTML = '';

                const insights = state.stats.totalMinutes > 0 ?
                    INSIGHTS.slice(0, 3) :
                    ["Start tracking time to see personalized insights about your productivity patterns."];

                insights.forEach(insight => {
                    const item = document.createElement('div');
                    item.className = 'insight-item';
                    item.innerHTML = `
                        <div class="insight-icon">💡</div>
                        <div class="insight-text">${insight}</div>
                    `;
                    insightsList.appendChild(item);
                });
            }

            // Flow patterns
            const flowPatterns = document.getElementById('flow-patterns');
            if (flowPatterns) {
                const avgSession = state.stats.sessions > 0 ?
                    Math.floor(state.stats.totalMinutes / state.stats.sessions) : 0;

                flowPatterns.innerHTML = `
                    <div class="insight-item">
                        <div class="insight-icon">⏱️</div>
                        <div class="insight-text">Average session: ${avgSession} minutes</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-icon">🎯</div>
                        <div class="insight-text">Peak focus: ${state.stats.totalMinutes > 60 ? 'Mornings' : 'Track more to see'}</div>
                    </div>
                `;
            }

            // Client breakdown
            const clientBreakdown = document.getElementById('client-breakdown');
            if (clientBreakdown) {
                clientBreakdown.innerHTML = '';

                state.clients.slice(0, 5).forEach(client => {
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar';
                    bar.innerHTML = `
                        <div class="chart-label">${client.name}</div>
                        <div class="chart-track">
                            <div class="chart-fill" style="width: ${(client.time / 400) * 100}%"></div>
                        </div>
                        <div class="chart-value">${formatMinutes(client.time)}</div>
                    `;
                    clientBreakdown.appendChild(bar);
                });
            }
        }

        // ===== FLOW SCORE CALCULATION =====

        function calculateFlowScore() {
            if (state.stats.totalMinutes === 0) return 0;

            const timeScore = Math.min(state.stats.totalMinutes / 180, 1);
            const completionScore = Math.min(state.stats.completed / 5, 1);
            const consistencyScore = state.stats.sessions > 0 ? Math.min(state.stats.totalMinutes / (state.stats.sessions * 30), 1) : 0;

            const score = ((timeScore * 0.4) + (completionScore * 0.4) + (consistencyScore * 0.2)) * 100;

            return Math.round(score);
        }

        function getFlowRating(score) {
            if (score === 0) return 'Start tracking';
            if (score < 30) return '🌱 Building';
            if (score < 60) return '🔥 Good flow';
            if (score < 85) return '⚡ Great flow';
            return '🚀 Peak flow';
        }

        function updateFlowScore() {
            const score = calculateFlowScore();
            state.stats.flowScore = score;
            saveState();
            updateStats();
        }

        // ===== UI INTERACTIONS =====

        function toggleTimer(event, taskId) {
            event.stopPropagation();

            if (state.activeTimer?.taskId === taskId) {
                stopTimer();
            } else {
                startTimer(taskId);
            }
        }

        function openTaskDetail(taskId) {
            console.log('Opening task detail:', taskId);
        }

        function toggleFocusMode() {
            const focusMode = document.getElementById('focusMode');
            focusMode.classList.toggle('active');
            state.focusMode = focusMode.classList.contains('active');

            if (state.focusMode && state.activeTimer) {
                const task = state.tasks.find(t => t.id === state.activeTimer.taskId);
                if (task) {
                    document.getElementById('focusTaskTitle').textContent = task.title;
                }
            }
        }

        function toggleCommandPalette() {
            const palette = document.getElementById('commandPalette');
            const isActive = palette.classList.contains('active');

            if (isActive) {
                palette.classList.remove('active');
            } else {
                palette.classList.add('active');
                document.getElementById('commandInput').focus();
                renderCommandResults();
            }
        }

        function renderCommandResults() {
            const results = document.getElementById('commandResults');

            const commands = [
                { icon: '➕', title: 'Add Task', desc: 'Create a new task • ⌘N', action: 'addTask' },
                { icon: '🎯', title: 'Focus Mode', desc: 'Enter deep focus • ⌘F', action: 'focusMode' },
                { icon: '📊', title: 'View Analytics', desc: 'See your stats • ⌘4', action: 'analytics' },
                { icon: '⤓', title: 'Export Data', desc: 'Download your data', action: 'export' },
                { icon: '⚡', title: 'Keyboard Shortcuts', desc: 'View all shortcuts', action: 'shortcuts' }
            ];

            results.innerHTML = '';

            commands.forEach((cmd, i) => {
                const item = document.createElement('div');
                item.className = 'command-item' + (i === 0 ? ' selected' : '');
                item.innerHTML = `
                    <div class="command-icon">${cmd.icon}</div>
                    <div class="command-item-content">
                        <h4>${cmd.title}</h4>
                        <p>${cmd.desc}</p>
                    </div>
                `;
                item.onclick = () => executeCommand(cmd.action);
                results.appendChild(item);
            });
        }

        function executeCommand(action) {
            toggleCommandPalette();

            switch(action) {
                case 'addTask':
                    document.getElementById('quick-add').focus();
                    break;
                case 'focusMode':
                    toggleFocusMode();
                    break;
                case 'analytics':
                    switchView('analytics');
                    break;
                case 'export':
                    exportData();
                    break;
                case 'shortcuts':
                    showKeyboardShortcuts();
                    break;
            }
        }

        function showKeyboardShortcuts() {
            const shortcuts = `
Keyboard Shortcuts:

⌘K - Command Palette
⌘N - New Task
⌘F - Focus Mode
⌘1 - Today View
⌘2 - All Tasks
⌘3 - Clients
⌘4 - Analytics
Esc - Close Overlays

All shortcuts work with Ctrl on Windows/Linux.
            `.trim();

            alert(shortcuts);
        }

        function exportData() {
            const data = {
                version: APP_VERSION,
                exportedAt: new Date().toISOString(),
                tasks: state.tasks,
                clients: state.clients,
                stats: state.stats
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `followw-export-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);

            alert('Data exported successfully! 📊');
        }

        // ===== REFLECTION =====

        function shouldShowReflection() {
            const todayTasks = state.tasks.filter(t => !t.completed);
            return todayTasks.length === 0 && state.tasks.length > 0 && state.stats.totalMinutes > 30;
        }

        function showReflection() {
            const reflection = document.getElementById('reflection');
            reflection.classList.add('active');

            const hours = Math.floor(state.stats.totalMinutes / 60);
            const minutes = state.stats.totalMinutes % 60;

            document.getElementById('reflection-time').textContent = `${hours}h ${minutes}m`;
            document.getElementById('reflection-tasks').textContent = state.stats.completed;
            document.getElementById('reflection-flow').textContent = state.stats.flowScore || '—';

            const insights = [
                "You maintained excellent focus throughout the day.",
                "Great work on completing all your priorities.",
                "Your consistency is building strong momentum.",
                "You're making meaningful progress every day.",
                "Keep up this excellent work rhythm."
            ];

            document.getElementById('reflection-insight').textContent =
                insights[Math.floor(Math.random() * insights.length)];
        }

        function closeReflection() {
            document.getElementById('reflection').classList.remove('active');
        }

        // ===== VIEW SWITCHING =====

        function switchView(viewName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.view === viewName);
            });

            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });

            document.getElementById(`${viewName}-view`).classList.add('active');
            state.currentView = viewName;

            if (viewName === 'analytics') {
                updateAnalytics();
            }
        }

        // ===== EVENT LISTENERS =====

        function setupEventListeners() {
            document.getElementById('quick-add').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.target.value.trim()) {
                    const value = e.target.value.trim();
                    const isFocus = state.tasks.filter(t => t.isFocus && !t.completed).length < 3;
                    addTask(value, isFocus);
                    e.target.value = '';
                }
            });

            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => switchView(tab.dataset.view));
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Command palette: Cmd/Ctrl+K
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    toggleCommandPalette();
                }

                // Focus mode: Cmd/Ctrl+F
                if ((e.metaKey || e.ctrlKey) && e.key === 'f' && !e.shiftKey) {
                    e.preventDefault();
                    toggleFocusMode();
                }

                // Quick add: Cmd/Ctrl+N
                if ((e.metaKey || e.ctrlKey) && e.key === 'n') {
                    e.preventDefault();
                    document.getElementById('quick-add').focus();
                }

                // View switching: Cmd/Ctrl+1,2,3,4
                if ((e.metaKey || e.ctrlKey) && ['1', '2', '3', '4'].includes(e.key)) {
                    e.preventDefault();
                    const views = ['today', 'tasks', 'clients', 'analytics'];
                    switchView(views[parseInt(e.key) - 1]);
                }

                // Escape: Close overlays
                if (e.key === 'Escape') {
                    const palette = document.getElementById('commandPalette');
                    const focusMode = document.getElementById('focusMode');
                    const reflection = document.getElementById('reflection');

                    if (palette.classList.contains('active')) {
                        toggleCommandPalette();
                    } else if (focusMode.classList.contains('active')) {
                        toggleFocusMode();
                    } else if (reflection.classList.contains('active')) {
                        closeReflection();
                    }
                }
            });

            document.getElementById('commandPalette').addEventListener('click', (e) => {
                if (e.target.id === 'commandPalette') {
                    toggleCommandPalette();
                }
            });
        }

        // ===== HELPERS =====

        function updateGreeting() {
            const hour = new Date().getHours();
            let greeting;

            if (hour < 12) greeting = 'good morning.';
            else if (hour < 17) greeting = 'good afternoon.';
            else if (hour < 21) greeting = 'good evening.';
            else greeting = 'good night.';

            document.getElementById('greeting').textContent = greeting;
        }

        function formatTime(ms) {
            const minutes = Math.floor(ms / 60000);
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;

            if (hours > 0) {
                return `${hours}h ${mins}m`;
            }
            return `${mins}m`;
        }

        function formatMinutes(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;

            if (hours > 0) {
                return `${hours}h ${mins}m`;
            }
            return `${mins}m`;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function addSampleClient() {
            const names = ['Startup Inc', 'Enterprise Co', 'Agency XYZ', 'Product Labs'];
            const colors = ['#3A76F0', '#10B981', '#F59E0B', '#EF476F'];

            const client = {
                name: names[Math.floor(Math.random() * names.length)],
                color: colors[Math.floor(Math.random() * colors.length)],
                tasks: Math.floor(Math.random() * 15) + 5,
                time: Math.floor(Math.random() * 300) + 100
            };

            state.clients.push(client);
            saveState();
            renderClients();
        }

        function filterTasks(filter) {
            console.log('Filtering tasks:', filter);
        }

        // ===== INITIALIZATION =====
        setTimeout(() => {
            if (document.getElementById('welcomeScreen').classList.contains('welcome-screen')) {
                startApp();
            }
        }, 3000);
    </script>
</body>
</html>
